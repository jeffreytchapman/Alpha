<html>
  <head>
    <title>Mine</title>
  </head>
  <body>
  <script src="https://www.puck-js.com/puck.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r99/three.min.js"></script>
  
  <button id="btnConnect" onclick=connectclick()>Connect</button>
  
  <script type="text/javascript">
    // Code to upload to Bangle.js
    var BANGLE_CODE = `
      Puck.on('accel',function(a) {
      var d = [
        "A",
        Math.round(a.acc.x), Math.round(a.acc.y), Math.round(a.acc.z)
        ];
      Bluetooth.println(d.join(","));
    });
    Puck.accelOn();
    `;
 
    var accel = new THREE.Vector3( 0, 0, 1);

    // When we click the connect button...
    var connection;
    var flashtimer;
    function connectclick() {
      flashtimer = setInterval(flasher, 2000);
    }
    
    function flasher() {
      Puck.write('digitalPulse(LED2, 1, 200);\n');
    }

    // WebGL boilerplate
    var scene, camera, renderer, cube;
    var WIDTH  = window.innerWidth;
    var HEIGHT = window.innerHeight;
    function init() {
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(70, WIDTH / HEIGHT, 1, 40);
      camera.position.set(0, -4, 8);
      camera.lookAt(scene.position);
      cube = new THREE.Mesh(new THREE.CubeGeometry(4, 2, 1), new THREE.MeshNormalMaterial());
      scene.add(cube);
      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(WIDTH, HEIGHT);
      document.body.appendChild(renderer.domElement);
    }
    
    function render() {
      cube.lookAt(accel);
      renderer.render(scene, camera);
    }

    init();
    render();
 
 </script>

 </body>
</html>
